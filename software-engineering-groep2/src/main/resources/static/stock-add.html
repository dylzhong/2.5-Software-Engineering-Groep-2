<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Voeg item toe</title>
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
</head>
<body>
<div class="container-main">
    <div class="main">
        <form id="form-add">
            <div class="form-group">
                <label for="id">ID</label>
                <input class="form-control" id="id" name="id" type="text" autocomplete="off" required>
            </div>
            <div class="form-group">
                <label for="ndc">NDC</label>
                <input class="form-control" id="ndc" name="ndc" type="text" autocomplete="off" required>
            </div>
            <div class="form-group">
                <label for="details">Details</label>
                <input class="form-control" id="details" name="details" type="text" autocomplete="off" required>
            </div>
            <div class="form-group">
                <label for="amount">Amount</label>
                <input class="form-control" id="amount" name="amount" type="number" autocomplete="off" required>
            </div>
            <button type="button" onclick="addItemToStock()">Submit</button>
            <button type="button" onclick="window.location.href='stock.html'">Terug</button>
        </form>
    </div>
</div>

<script>
    function extractItemDataFromForm(form) {
        const formData = new FormData(form);
        return {
            id: formData.get("id"),
            ndc: formData.get("ndc"),
            details: formData.get("details"),
            amount: formData.get("amount")
        };
    }

    function addItemToStock() {
        const form = document.getElementById("form-add");

        if (!form.checkValidity()) {
            form.reportValidity();
            return;
        }

        const item = extractItemDataFromForm(form);

        $.ajax({
            url: "/stock/new",
            method: "POST",
            data: item,
            success: function(data) {
                alert(data);
                window.location.reload();
            },
            error: function() {
                alert("An error occurred while adding the item.");
            }
        });
    }
</script>
</body>
</html>
