<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>...</title>
        <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    </head>
    <body>
        <div class="container-main">
            <div class="main">
                <form id="form-add">
                    <div class="form-group">
                        <label for="id">ID</label>
                        <input class="form-control" id="id" name="id" type="text" autocomplete="off" required>
                    </div>
                    <div class="form-group">
                        <label for="ndc">NDC</label>
                        <input class="form-control" id="ndc" name="ndc" type="text" autocomplete="off" required>
                    </div>
                    <div class="form-group">
                        <label for="details">Details</label>
                        <input class="form-control" id="details" name="details" type="text" autocomplete="off" required>
                    </div>
                    <button type="button" onclick="addItemToStock(event)">Submit</button>
                    <button type="button" onclick="window.location.href='stock.html'">Terug</button>
                </form>
            </div>
        </div>
        <script>
            function extractItemDataFromForm(form) {
                const formData = new FormData(form);
                return {
                    id: formData.get("id"),
                    ndc: formData.get("ndc"),
                    details: formData.get("details")
                };
            }

            function addItemToStock(event) {
                event.preventDefault();

                const form = document.getElementById("form-add");

                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }

                const item = extractItemDataFromForm(form);

                $.get("/stock/new", item, function(data) {
                    console.log(data);
                    alert("Item is successfully added");
                    window.location.reload();
                });
            }
        </script>
    </body>
</html>